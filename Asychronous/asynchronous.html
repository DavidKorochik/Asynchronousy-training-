<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asynchronous JavaScript</title>
</head>
<body>
    <h1>Asynchronous JavaScript</h1>
    <script>

        // const second = () => {
        //     setTimeout(() => {
        //         console.log('Async hey there');
        //     }, 2000);
        // }

        // const first = () => {
        //     console.log('Hey there');
        //     second();
        //     console.log('The end');
        // };
        
        // first();

        // function getRecipe(){
        //     setTimeout(() => {
        //         const recipeID = [523, 883, 432, 974];
        //         console.log(recipeID);

        //         setTimeout(id => {
        //             const recipe = {title: 'Fre3sh tomato pasta', publisher: 'Jonas'};
        //             console.log(`${id}: ${recipe.title}`);

        //             setTimeout(publisher => {
        //                 const recipe2 = {title: 'Italian pizza', publisher: 'Jonas'};
        //                 console.log(recipe2);
        //             }, 1500, recipe.publisher);

        //         }, 1500, recipeID[2]);

        //     }, 1500);
        // }            
        // getRecipe();


        // const getIDs = new Promise((resolve, reject) => {
        //     setTimeout(() => {
        //         resolve([523, 883, 432, 974]);
        //     }, 1500);
        // });

        // const getRecipe = recID => {
        //     return new Promise((resolve, reject) => {
        //         setTimeout(ID => {
        //             const recipe = {title: 'Fresh tomato pasta', publisher: 'Jonas'};
        //         resolve(`${ID}: ${recipe.title}`);
        //         }, 1500, recID);
        //     });
        // };

        // const getRelated = publisher => {
        //     return new Promise((resolve, reject) => {
        //         setTimeout(pub => {
        //             const recipe = {title: 'Italian pizza', publisher: 'Jonas'};
        //             resolve(`${pub}: ${recipe.title}`);
        //         }, 1500, publisher);
        //     });
        // };

        // getIDs
        // .then(IDs => {
        //     console.log(IDs);
        //     return getRecipe(IDs[2]);
        // })
        // .then(recipe => {
        //     console.log(recipe);
        //     return getRelated('Jonas');
        // })
        // .then(recipe => {
        //     console.log(recipe);
        // })
        // .catch(error => {
        //     console.log('Error!!');
        // });

        // async function getRecipesAW() {
        //     const IDs = await getIDs;
        //     console.log(IDs);
        //     const recipe = await getRecipe(IDs[2]);
        //     console.log(recipe);
        //     const related = await getRelated('Jonas');
        //     console.log(related);

        //     return recipe;
        // }  
        // getRecipesAW().then(result => {
        //     console.log(result);
        // });
        
    //     function getWeather(woeid){
    //         fetch(`https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/${woeid}/`)
    //     .then(result => {
    //         //console.log(result);
    //         return result.json();
    //     })
    //     .then(data => {
    //         //console.log(data);
    //         const today = data.consolidated_weather[0];
    //         console.log(`Temperatures in ${data.title} stay between ${today.min_temp} and ${today.max_temp}`);
    //     })  
    //     .catch(error => {
    //         console.log(error);
    //     });
    // }    
    // getWeather(2487956);
    // getWeather(44418);

    // async function getWeatherAW(woeid) {
    //     try{
    //     const result = await fetch(`https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/${woeid}/`);
    //     const data = await result.json();
    //     const tomorrow = data.consolidated_weather[1];
    //     console.log(`Temperatures tomorrow in ${data.title} stay between ${tomorrow.min_temp} and ${tomorrow.max_temp}`);
    //     return data;
    //     } catch(error) {
    //         console.log(error);
    //     }
    // }
    // getWeatherAW(2487956);
    // let dataLondon;
    // getWeatherAW(44418).then(data => {
    //     dataLondon = data;
    //     console.log(dataLondon);
    // });
    
// let keepsHisWord;
// keepsHisWord = true;
// promise1 = new Promise(function(resolve, reject) {
//   if (keepsHisWord) {
//     resolve("The man likes to keep his word");
//   } else {
//     reject("The man doesnt want to keep his word");
//   }
// });

//Exercise 1:
//Write a function testNum that takes a number as an argument and returns a Promise that tests if the value is less than or greater than the value 10.

// const testNum = number => {
//     return new Promise((resolve, reject) => {
//         if(number > 10) {
//             resolve('The number is greater than 10!');
//         } else {
//             reject('The number is less than 10!');
//         }
//     }
// )};

// testNum(8).then(resTrue => {
//     console.log(resTrue);
// }).catch(resWrong => {
//     console.log(resWrong);
// });

//Exercise 2:
//Write two functions that use Promises that you can chain! The first function, makeAllCaps(), will take in an array of words and capitalize them, and then the second function, sortWords(), will sort the words in alphabetical order. If the array contains anything but strings, it should throw an error.

// const arrayOfWords = ['cucumber', 'tomato', 'avocado'];
// const makeAllCaps = arr => {
//     return new Promise((resolve, reject) => {
//         let arrCopyCaps = arr.map(word => {
//             if(typeof word === 'string'){
//                 return word.toUpperCase();
//             } else {
//                 reject('ERROR: the word is not a string and you cannot uppercase it!');
//             }
//         });
//         resolve(arrCopyCaps);
//     })
// };

// async function call() {
//     const functionCall = await makeAllCaps(arrayOfWords);
//     console.log(functionCall);
// }

// call();

// const sortWords = arr => {
//     return new Promise((resolve, reject) => {
//         arr.forEach(word => {
//             if(typeof word !== 'string'){
//                 reject('ERROR: the word is not a string so you cant sort it!');
//             } else {
//                 resolve(arr.sort());
//             }
//         });
//     }
// )};

// makeAllCaps(arrayOfWords)
// .then(sortWords)
// .then(result => console.log(result))
// .catch(error => console.log(error));

    </script>
</body>
</html>